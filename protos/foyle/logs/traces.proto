syntax = "proto3";

import "foyle/v1alpha1/agent.proto";
import "runme/runner/v1/runner.proto";

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

package foyle.logs;

option go_package = "github.com/jlewi/foyle/protos/go/foyle/logs;logspb";

message Trace {
  string id = 1;
  google.protobuf.Timestamp  start_time = 2;
  google.protobuf.Timestamp    end_time = 3;

  oneof data {
    GenerateTrace generate = 4;
    ExecuteTrace execute = 5;
  }

  // Eval mode is true if the trace was generated in eval mode.
  bool eval_mode = 6;
}

message GenerateTrace {
  GenerateRequest request = 1;
  GenerateResponse response = 2;
}

message ExecuteTrace {
  ExecuteRequest request = 1;
  ExecuteResponse response = 2;
}

message RunMeTrace {
  runme.runner.v1.ExecuteRequest request = 1;
}